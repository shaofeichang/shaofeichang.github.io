# 1.预处理

##  1.1 由预处理器对c++源代码进行的处理

1. 宏的替换
2. 删除注释
3. 处理预处理指令，#include #define 等
在vs中，可以使用vs开发人员命令提示，使用cl /P main.cpp 只进行预编译生成main.i文件
g++ -E main.cpp>main.i
g++ -E a.cpp>main.i
打开生成的A.i文件即可看到预处理过后的文件

# 2.编译和优化

![å¾ç2](https://images0.cnblogs.com/blog/412433/201405/292249100095523.png)

1. 词法分析  识别单词，确认词类
2. 语法分析 识别短语和句型的语法属性
3. 语义分析 确认单词、短语和句型的语义特征
4. 代码优化 修辞、文本编辑
5. 代码生成 生成译文
内联函数的替换就发生在这一阶段
在g++中，
g++ -S将预处理阶段生成的.i文件生成相应的汇编文件
g++ -S main.i main.S
g++ -S a.i a.s

   
# 3.生成目标文件

汇编过程是把汇编语言代码翻译成目标机器指令的过程。
在最终的目标文件中除了拥有自己的数据和二进制代码之外，还至少要提供两个表：未解决符号表和导出符号表，分别告诉编译器自己需要什么和能够提供什么。
编译器把一个cpp编译成目标文件时，除了在目标文件中写入cpp里面包含的数据和代码，还有提供三个表：未解决符号表，导出符号表和地址重定向表。
未解决符号表提供了所有在该编译单元里引用但是定义并不在本编译单元里的符号及其出现的地址。 
导出符号表提供了本编译单元具有定义，并且愿意提供给其他编译单元使用的符号及其地址。 
地址重定向表提供了本编译单元所有对自身地址的引用的记录。

g++中可以使用g++ -c命令
g++ –c main.s –o main.o
g++ –c a.s –o a.o

# 4.链接
由汇编程序生成的目标文件并不能立即就被执行，其中可能还有许多没有解决的问题。例如，某个源文件中的函数可能引用了另一个源文件中定义的某个符号（如变量或者函数调用等）；在程序中可能调用了某个库文件中的函数，等等。所有的这些问题，都需要经链接程序的处理方能得以解决。
g++ a.o main.o –o main.out
